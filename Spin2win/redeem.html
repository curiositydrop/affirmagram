<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Your Curiosity Drop!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { 
    font-family:Arial, sans-serif; 
    background:#f5f5f5; 
    margin:0; padding:0;
    display:flex; justify-content:center; align-items:center; 
    height:100vh; 
}
.container { 
    background:#fff; padding:2rem; border-radius:12px; 
    text-align:center; box-shadow:0 5px 20px rgba(0,0,0,0.2); 
    max-width:400px; 
}
h1 { font-size:2rem; margin-bottom:0.5rem; }
.reward-box { 
    background:#f0f0f0; padding:1rem; margin:1rem 0; border-radius:8px; min-height:320px;
}
.reward-box h2 { font-size:1.5rem; margin-bottom:0.5rem; }
.reward-box img { max-width:150px; margin-bottom:1rem; }
.primary-btn { 
    padding:1rem 2rem; font-size:1.2rem; background:#ff6b6b; border:none; 
    border-radius:8px; color:#fff; cursor:pointer; margin-top:1rem; display:inline-block; text-decoration:none; 
}
.brought-by-white {
    text-align: center;
    margin-top: 1rem;
    font-size: 0.95rem;
    color: #333;
}
.brought-by-white a {
    color: #ff6b6b;
    text-decoration: none;
    font-weight: bold;
}
.brought-by-white a:hover { text-decoration: underline; }
.primary-btn:hover { background:#ff4757; }
#copyButton { padding:0.5rem 1rem; font-size:1rem; margin-top:0.5rem; }

/* Popup Form Styles */
#popupForm {
    display:none;
    position:fixed;
    top:0; left:0; right:0; bottom:0;
    background:rgba(0,0,0,0.6);
    justify-content:center;
    align-items:center;
}
.form-content {
    background:#fff;
    padding:2rem;
    border-radius:10px;
    max-width:350px;
    width:90%;
    text-align:left;
}
.form-content h3 {
    text-align:center;
    margin-top:0;
}
.form-content input {
    width:100%;
    padding:0.5rem;
    margin:0.5rem 0;
    border-radius:6px;
    border:1px solid #ccc;
}
.form-content button {
    width:100%;
    padding:0.8rem;
    background:#ff6b6b;
    border:none;
    color:#fff;
    border-radius:6px;
    cursor:pointer;
}
.form-content button:hover { background:#ff4757; }

.drop-locations-btn {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  margin: 1rem auto;
  background: #1e90ff; /* bright blue to stand out from your red Back button */
  color: #fff;
  border-radius: 8px;
  text-decoration: none;
  font-weight: bold;
  transition: background 0.3s;
}

.drop-locations-btn:hover {
  background: #0d6efd; /* slightly darker blue on hover */
}
</style>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VY8J19CG6L"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-VY8J19CG6L');
</script>
</head>
<body>

<div class="container">
    <h1>ðŸŽ‰ WINNER! ðŸŽ‰</h1>
    <div class="reward-box">
        <img id="logo" src="" alt="Sponsor Logo">
        <h2 id="sponsorName">Sponsor Name</h2>
        <p id="prize">Prize / Offer</p>

        <button id="claimButton" class="primary-btn">Claim Prize</button>
       <!-- <button class="primary-btn" onclick="window.location.href='http://curiositydrop.com/zonemap.html'">
  See all Drop Locations
</button> -->

        <p id="refCode" style="font-weight:bold; margin-top:1rem;">Your Claim Code: </p>
    </div>

    <p class="brought-by-white">
  Brought to you by: <a href="https://curiositydrop.com" target="_blank">CuriosityDrop.com</a> &mdash; Built and developed by: <a href="https://mbgdigital.com" target="_blank">MBG Digital</a>
</p>
</div>

<div id="popupForm">
  <div class="form-content">
    <h3>Claim Your Prize</h3>
    <input type="text" id="userName" placeholder="Your Name" required>
<input type="email" id="userEmail" placeholder="Your Email" required>
<input type="text" id="userPhone" placeholder="Phone (optional)">
<input type="text" id="userMessage" placeholder="Message (optional)">
    <button id="sendEmail">Submit Claim</button>
  <p class="tiny">
    ðŸ”’ We respect your privacy. Your information is shared only with the sponsor you contact.
    Curiosity Drop simply provides the introduction and is not involved in any further communication or transaction. *You can spin as many times as you like, but each invoice or job is limited to one reward. Multiple spins for the same job do not add up.</p>
  </div>
</div>

<script src="sponsors.js"></script>
<script>
const params = new URLSearchParams(window.location.search);
const sponsorId = params.get("sponsor");
const refCode = params.get("ref");
const winner = sponsors[sponsorId];

if (winner) {
    document.getElementById("sponsorName").textContent = winner.name;
    document.getElementById("prize").textContent = winner.prize;
    document.getElementById("logo").src = winner.logo;
    document.getElementById("logo").alt = winner.name + " Logo";

    document.getElementById('refCode').textContent = "Your Claim Code: " + refCode;

    const claimButton = document.getElementById('claimButton');
    const popupForm = document.getElementById('popupForm');
    const sendEmail = document.getElementById('sendEmail');

    // Log page load (scan/redeem)
    logEvent(winner.name, refCode, 'redeem');

    claimButton.addEventListener('click', () => {
        popupForm.style.display = 'flex';
    });

    popupForm.addEventListener('click', (e) => {
        if (e.target === popupForm) popupForm.style.display = 'none';
    });

    sendEmail.addEventListener('click', () => {
    const name = document.getElementById('userName').value;
    const email = document.getElementById('userEmail').value;
    const phone = document.getElementById('userPhone').value;
    const message = document.getElementById('userMessage').value;

    if (!name || !email) {
        alert('Please fill in your name and email.');
        return;
    }

    // Construct email body including optional fields if provided
    let bodyContent = `Name: ${name}\nEmail: ${email}\n`;
    if (phone) bodyContent += `Phone: ${phone}\n`;
    if (message) bodyContent += `Message: ${message}\n`;
    bodyContent += `\nSponsor: ${winner.name}\nClaim Code: ${refCode}\n\nSubmitted via Curiosity Drop`;

    const subject = encodeURIComponent(`Prize Claim via Curiosity Drop`);
    const body = encodeURIComponent(bodyContent);

    window.location.href = `mailto:${winner.email}?subject=${subject}&body=${body}`;

    popupForm.style.display = 'none';
});
}

// Tracking function
function logEvent(dropName, refCode, action, name="", email="") {
    fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec', {
        method: 'POST',
        body: JSON.stringify({drop: dropName, ref: refCode, action: action, name: name, email: email})
    }).catch(err => console.log('Logging failed', err));
}
</script>

</body>
</html>
